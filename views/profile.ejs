<!DOCTYPE html>
<html lang="en">
  <head>
    <title>User Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>

  <body class="back bg-cover h-screen">
    <% if (message && message!=undefined && message!="" && message!="undefined") { %>
      <script>
        alert('<%= message %>');
      </script>
    <% } %>
      <nav class="nav">
        <h1>GreenMentor</h1>
        <div>
          <a href="/user/dashboard" class="text-gray-600 ml-4 hover:text-green-500"
            >Dashboard</a
          >
          <a href="/user/plants" class="text-gray-600 ml-4 hover:text-green-500"
          >Plants</a
          >
          <a href="/user/events" class="text-gray-600 ml-4 hover:text-green-500"
            >Events</a
          >
          <a href="/user/my-plants" class="text-gray-600 ml-4 hover:text-green-500"
          >My Plants</a
        >
          <% if(premium) { %>
            <a href="/user/my-posts" class="text-gray-600 ml-4 hover:text-green-500"
            >My Posts</a
          >
        <% } %>
          <a href="/user/profile" class="text-gray-600 ml-4 hover:text-green-500"
            >Profile</a
          >
        </div>
      </nav>
    <div class="flex h-full pl-10 pr-10 pt-10 min-h-screen">
      <div
        class="w-1/3 bg-emerald-100 p-10 flex flex-col justify-center items-start"
      >
      <% if(user_info.image!=null) { %>
        <img
          src="/uploads/<%= user_info.image %>"
          alt="user"
          class="rounded-full p-10 mb-4"
        />
      <% } else { %>
            <img
            src="/default_user.png"
            alt="user"
            class="rounded-full p-10 mb-4"
          />
      <% } %>
        <h2 class="text-4xl pl-12 font-semibold mb-2"><%= user_info.first_name%> <%= user_info.last_name %></h2>
        <form class="logout-button" action="/user/logout" method="post">
          <button class="transition-colors" type="submit">Logout</button>
        </form>
      </div>
      <div class="w-2/3 bg-emerald-50 p-10 flex flex-col justify-center">
        <h2 class="text-3xl font-semibold mb-4">User Profile</h2>
        <div class="mb-4">
          <span class="text-gray-500">Phone</span>
          <p class="text-gray-800"><%= user_info.phone_no %></p>
        </div>
        <div class="mb-4">
          <span class="text-gray-500">Email</span>
          <p class="text-gray-800"><%= user_info.email %></p>
        </div>
        <div class="mb-4">
          <span class="text-gray-500">Birthday</span>
          <p class="text-gray-800"><%= formattedDate(user_info.birth_date) %></p>
        </div>
        <% if(user_info.license!=null) { %>
          <div class="mb-4">
            <span class="text-gray-500">License</span>
            <p class="text-gray-800"><%= user_info.license %></p>
          </div>
        <% } %>
        <div class="profile-button">
            <a 
            href="/user/update-profile"
            class="text-red-500 w-1/3 border border-red-500 px-4 py-2 rounded-full hover:bg-red-500 hover:text-white transition-colors"
            >
            Edit Profile
            </a>
            <a 
            href="/user/change-password"
            class="text-red-500 w-1/3 border border-red-500 px-4 py-2 rounded-full hover:bg-red-500 hover:text-white transition-colors"
            >
            Change Password
            </a>
            <% if(!premium) { %>
              <a 
              href="/user/request-premium"
              class="text-red-500 w-1/3 border border-red-500 px-4 py-2 rounded-full hover:bg-red-500 hover:text-white transition-colors"
              >
              Update to premium
              </a>
            <% } %>
        </div>
      </div>
    </div>
  </body>
</html>
